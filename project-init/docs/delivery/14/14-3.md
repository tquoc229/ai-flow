# 14-3 Mở rộng Tích hợp cho các Component Chính

@Back to task list

## Description

Là một biên tập viên, tôi muốn thấy các chỉ báo chỉnh sửa trên hầu hết các thành phần nội dung chính của trang (ví dụ: khối văn bản, hình ảnh, thẻ thông tin) để tôi có thể chỉnh sửa chúng một cách dễ dàng.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
| --------- | ---------- | ----------- | --------- | ------- | ---- |
|           |            |             |           |         |      |

## Requirements

1. Áp dụng `VisualEditorWrapper` cho ít nhất 5 component nội dung quan trọng khác nhau.
2. Đảm bảo rằng việc truyền `collection` và `itemId` là chính xác cho mỗi component.
3. Tất cả các chỉ báo chỉnh sửa đều hoạt động đúng chức năng, điều hướng đến đúng mục trong Directus.
4. Giao diện không bị xô lệch sau khi thêm các wrapper.

## Implementation Plan

- Xác định 5-7 component ứng viên để tích hợp. Ví dụ:
  - `components/PostCard.tsx`
  - `components/sections/ArticlesGridSection.tsx`
  - `components/sections/FeaturedSection.tsx`
  - `components/ArticlePageClient.tsx` (cho nội dung bài viết)
  - `components/HtmlRenderer.tsx` (nếu có thể)
- Lần lượt đi qua từng component:
  - Bọc component hoặc các phần tử con của nó bằng `VisualEditorWrapper`.
  - Đảm bảo rằng `collection` và `itemId` (và có thể cả `field` cho nội dung inline) được truyền chính xác. Điều này có thể yêu cầu điều chỉnh cách dữ liệu được fetch và truyền xuống.
  - Ví dụ trong `PostCard.tsx`:
    ```jsx
    <VisualEditorWrapper collection="articles" itemId={post.id}>
      <article>...</article>
    </VisualEditorWrapper>
    ```
- Kiểm tra cẩn thận từng component sau khi tích hợp để đảm bảo không có lỗi giao diện.

## Verification

- Đăng nhập với vai trò biên tập viên và duyệt qua các trang khác nhau (trang chủ, trang danh mục, trang bài viết).
- Xác nhận rằng các chỉ báo "edit" xuất hiện trên tất cả các component đã được tích hợp.
- Nhấp vào từng chỉ báo và xác minh rằng nó điều hướng đến đúng mục trong Directus.
- Kiểm tra trang web với vai trò người dùng thông thường để đảm bảo không có gì bị hỏng.

## Files Modified

- `components/PostCard.tsx`
- `components/sections/ArticlesGridSection.tsx`
- `components/sections/FeaturedSection.tsx`
- `app/(main)/insights/page.tsx`
- `app/(main)/[slug]/page.tsx`
- (Có thể có các tệp khác tùy thuộc vào các component được chọn)
